# **NOTE**: this file is generated by `dhall-render`.
# You should NOT edit it manually, your changes will be lost.

---
apiVersion: batch/v1
kind: Job
metadata:
  generateName: platform-data-graph-subgraph-deploy-
  labels:
    deploy_id: "${ execution.id }"
    project: classic
    role: subgraph-deploy
    secret-service.zende.sk/sidecar: init
    tag: d85f0ce4f0185f4971afecf68dc7318f4ea128ca
    team: one-graph
    track: "${ execution.id }"
  namespace: classic
spec:
  activeDeadlineSeconds: 300
  backoffLimit: 4
  template:
    metadata:
      annotations:
        secret/APOLLO_KEY: staging/guide-graph/global/APOLLO_KEY_DEPLOY
        secret/ONEGRAPH_GITHUB_TOKEN: staging/cicd-toolkit/global/github_token
      labels:
        product: support
        project: classic
        role: subgraph-deploy
        secret-service.zende.sk/sidecar: init
        team: one-graph
      name: classic-subgraph-deploy
    spec:
      containers:
      - args:
        - subgraph-deploy
        env:
        - name: APOLLO_CONFIG_HOME
          value: "/tmp"
        - name: APOLLO_GRAPH_ID
          value: platform-data-graph-staging
        - name: APOLLO_GRAPH_VARIANT
          value: pod998
        - name: SUBGRAPH_NAME
          value: classic
        - name: SUBGRAPH_SCHEMA_PATH
          value: components/graph/app/graph/schema.graphql
        - name: SUBGRAPH_REPOSITORY
          value: zendesk/zendesk
        - name: SUBGRAPH_GIT_SHA
          value: d85f0ce4f0185f4971afecf68dc7318f4ea128ca
        image: 713408432298.dkr.ecr.us-west-2.amazonaws.com/prod/zendesk/platform-data-graph-sdk:latest
        name: platform-data-graph-subgraph-deploy
        resources:
          limits:
            cpu: 500m
            memory: 256M
          requests:
            cpu: 500m
            memory: 256M
      restartPolicy: Never
      securityContext:
        runAsNonRoot: true
        runAsUser: 1000
  ttlSecondsAfterFinished: 3600
